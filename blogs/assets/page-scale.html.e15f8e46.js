import{_ as n,o as s,c as a,f as t}from"./app.140f40fb.js";const p={},o=t(`<h1 id="页面适配缩放计算" tabindex="-1"><a class="header-anchor" href="#页面适配缩放计算" aria-hidden="true">#</a> 页面适配缩放计算</h1><h2 id="page-scale-js" tabindex="-1"><a class="header-anchor" href="#page-scale-js" aria-hidden="true">#</a> page-scale.js</h2><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pageScale <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 页面缩放比例</span>
  <span class="token literal-property property">cachePageScale</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

  <span class="token function">calculateScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">;</span>

    <span class="token keyword">const</span> windowWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> windowHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> baseRate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">375</span> <span class="token operator">/</span> <span class="token number">812</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> curRate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowWidth <span class="token operator">/</span> windowHeight<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curRate <span class="token operator">&lt;=</span> baseRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curRate <span class="token operator">&gt;</span> baseRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> scaleW <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowWidth <span class="token operator">/</span> <span class="token number">375</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleH <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowHeight <span class="token operator">/</span> <span class="token number">812</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleMin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>scaleW<span class="token punctuation">,</span> scaleH<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleMax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>scaleW<span class="token punctuation">,</span> scaleH<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>scaleMin <span class="token operator">/</span> scaleMax<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">centerScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">transformOrigin</span><span class="token operator">:</span> <span class="token string">&#39;center center&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">scale(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> pageScale<span class="token punctuation">;</span>
</code></pre></div><h2 id="demo" tabindex="-1"><a class="header-anchor" href="#demo" aria-hidden="true">#</a> demo</h2><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> pageScale <span class="token keyword">from</span> <span class="token string">&#39;page-scale&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> scale <span class="token operator">=</span> pageScale<span class="token punctuation">.</span><span class="token function">calculateScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,5),e=[o];function c(l,u){return s(),a("div",null,e)}const i=n(p,[["render",c],["__file","page-scale.html.vue"]]);export{i as default};

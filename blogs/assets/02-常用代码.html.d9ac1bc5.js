import{_ as n,o as s,c as a,f as p}from"./app.94dbb5e1.js";const t={},o=p(`<h1 id="\u5E38\u7528\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u4EE3\u7801" aria-hidden="true">#</a> \u5E38\u7528\u4EE3\u7801</h1><h2 id="\u9875\u9762\u9002\u914D\u7F29\u653E\u8BA1\u7B97" tabindex="-1"><a class="header-anchor" href="#\u9875\u9762\u9002\u914D\u7F29\u653E\u8BA1\u7B97" aria-hidden="true">#</a> \u9875\u9762\u9002\u914D\u7F29\u653E\u8BA1\u7B97</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> pageScale <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u9875\u9762\u7F29\u653E\u6BD4\u4F8B</span>
  <span class="token literal-property property">cachePageScale</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

  <span class="token function">calculatePageScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">;</span>

    <span class="token keyword">const</span> windowWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token keyword">const</span> windowHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token keyword">const</span> baseRate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">375</span> <span class="token operator">/</span> <span class="token number">812</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> curRate <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowWidth <span class="token operator">/</span> windowHeight<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curRate <span class="token operator">&lt;=</span> baseRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>curRate <span class="token operator">&gt;</span> baseRate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> scaleW <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowWidth <span class="token operator">/</span> <span class="token number">375</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleH <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>windowHeight <span class="token operator">/</span> <span class="token number">812</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleMin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>scaleW<span class="token punctuation">,</span> scaleH<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> scaleMax <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>scaleW<span class="token punctuation">,</span> scaleH<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">(</span>scaleMin <span class="token operator">/</span> scaleMax<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachePageScale<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> pageScale<span class="token punctuation">;</span>
</code></pre></div><h2 id="svg\u56FE\u7247\u6362\u8272" tabindex="-1"><a class="header-anchor" href="#svg\u56FE\u7247\u6362\u8272" aria-hidden="true">#</a> svg\u56FE\u7247\u6362\u8272</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@description</span>: svg\u56FE\u7247\u6362\u8272
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">domId</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">fillColor</span> [255, 255, 255]
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">strokeColor</span> [0, 0, 0]
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span>
 */</span>
<span class="token function">svgChangeColor</span><span class="token punctuation">(</span>domId <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> strokeColor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>domId<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fillStyle <span class="token operator">=</span> fillColor <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">fill:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fillColor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// fill=\u586B\u5145\u8272</span>
  <span class="token keyword">const</span> strokeStyle <span class="token operator">=</span> strokeColor <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">stroke:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>strokeColor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// stroke=\u63CF\u8FB9\u8272</span>
  dom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
    <span class="token string">&#39;style&#39;</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fillStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>strokeStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="svg\u8F6Cbase64\u56FE\u7247" tabindex="-1"><a class="header-anchor" href="#svg\u8F6Cbase64\u56FE\u7247" aria-hidden="true">#</a> svg\u8F6Cbase64\u56FE\u7247</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@description</span>: svg\u56FE\u8F6Cbase64\u56FE
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">domId</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span>
 */</span> 
<span class="token function">svgToBase64</span><span class="token punctuation">(</span><span class="token parameter">domId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> svg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>svg<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> serial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeToString</span><span class="token punctuation">(</span>svg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> base64 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">data:image/svg+xml;base64,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>window<span class="token punctuation">.</span><span class="token function">btoa</span><span class="token punctuation">(</span>serial<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> base64<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="canvas\u56FE\u7247\u6362\u8272" tabindex="-1"><a class="header-anchor" href="#canvas\u56FE\u7247\u6362\u8272" aria-hidden="true">#</a> canvas\u56FE\u7247\u6362\u8272</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@description</span>: canvas\u76AE\u80A4\u6362\u8272
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">img</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">colorNewArr</span> [&#39;50, 50, 50&#39;]
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">colorOriginArr</span> [&#39;150, 150, 150&#39;]
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span>
 */</span>
<span class="token function">canvasChangeColor</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> colorNewArr<span class="token punctuation">,</span> colorOriginArr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> img<span class="token punctuation">;</span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;canvas&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
  canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token comment">// \u5C06\u6E90\u56FE\u7247\u753B\u5230\u753B\u5E03\u4E0A</span>
  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u83B7\u53D6\u753B\u5E03\u7684\u50CF\u7D20\u4FE1\u606F</span>
  <span class="token keyword">const</span> imageData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> colorData <span class="token punctuation">}</span> <span class="token operator">=</span> imageData<span class="token punctuation">;</span>
  <span class="token comment">// \u5FAA\u73AF\u50CF\u7D20\u70B9\u6539\u53D8\u989C\u8272\u30101\u50CF\u7D20=4\u901A\u9053\u3011\u3010\u5171x\u50CF\u7D20\uFF1A\u5BBD*\u9AD8\u3011\u3010\u5171x\u901A\u9053\uFF1A\u5BBD*\u9AD8*4\u3011</span>
  <span class="token keyword">const</span> pixelLength <span class="token operator">=</span> width <span class="token operator">*</span> height<span class="token punctuation">;</span>
  <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// \u6362\u8272\u533A\u95F4\u9608\u503C</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pixelLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>cr<span class="token punctuation">,</span> cg<span class="token punctuation">,</span> cb<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> colorOriginArr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> limit <span class="token operator">&lt;</span> cr
        <span class="token operator">&amp;&amp;</span> cr <span class="token operator">&lt;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> limit
        <span class="token operator">&amp;&amp;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> limit <span class="token operator">&lt;</span> cg
        <span class="token operator">&amp;&amp;</span> cg <span class="token operator">&lt;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> limit
        <span class="token operator">&amp;&amp;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> limit <span class="token operator">&lt;</span> cb
        <span class="token operator">&amp;&amp;</span> cb <span class="token operator">&lt;</span> <span class="token operator">+</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> limit
    <span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> colorNewArr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> colorNewArr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span>r<span class="token punctuation">;</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span>g<span class="token punctuation">;</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span>b<span class="token punctuation">;</span>
      colorData<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">255</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u5C06\u4FEE\u6539\u540E\u4EE3\u7801\u590D\u5236\u5230\u753B\u5E03</span>
  ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8F93\u51FAbase64\u56FE</span>
  <span class="token keyword">return</span> canvas<span class="token punctuation">.</span><span class="token function">toDataUrl</span><span class="token punctuation">(</span><span class="token string">&#39;image/png&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="\u8BBE\u7F6Ecanvas\u80CC\u666F\u900F\u660E" tabindex="-1"><a class="header-anchor" href="#\u8BBE\u7F6Ecanvas\u80CC\u666F\u900F\u660E" aria-hidden="true">#</a> \u8BBE\u7F6Ecanvas\u80CC\u666F\u900F\u660E</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#stage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;webgl&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>globalAlpha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div>`,11),e=[o];function c(l,u){return s(),a("div",null,e)}const r=n(t,[["render",c],["__file","02-\u5E38\u7528\u4EE3\u7801.html.vue"]]);export{r as default};

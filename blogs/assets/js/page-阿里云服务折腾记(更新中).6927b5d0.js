(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{624:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"阿里云服务折腾记-更新中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云服务折腾记-更新中"}},[t._v("#")]),t._v(" 阿里云服务折腾记(更新中)")]),t._v(" "),a("p",[t._v("本来想找一篇服务器配置较全面的教程来学习，结果搜索到的多是某一知识点的文章，遂决定边折腾边记录一篇从购买服务器、域名到搭建 ftp、nginx 等的文章。文中涉及的知识点、命令等多是从网上众多文章教程整合而来，图片是本人配置过程中的截图。")]),t._v(" "),a("h2",{attrs:{id:"_1、云服务器购买和配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、云服务器购买和配置"}},[t._v("#")]),t._v(" 1、云服务器购买和配置")]),t._v(" "),a("h3",{attrs:{id:"_1-1-购买云服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-购买云服务器"}},[t._v("#")]),t._v(" 1.1 购买云服务器")]),t._v(" "),a("p",[t._v("初学服务配置，先买个小配置的云服务随意折腾一下😄。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600693883-584x824.jpg",alt:"购买服务器"}})]),t._v(" "),a("h3",{attrs:{id:"_1-2-root-用户登陆密码修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-root-用户登陆密码修改"}},[t._v("#")]),t._v(" 1.2 Root 用户登陆密码修改")]),t._v(" "),a("p",[t._v("最开始用 "),a("code",[t._v("VNC")]),t._v(" 远程登陆输入 "),a("code",[t._v("root")]),t._v(" 用户名和密码时，总是登陆失败提示 "),a("code",[t._v("login incorrect")]),t._v("，后来发现密码弄错了，所以重置 "),a("code",[t._v("root")]),t._v(" 用户的密码后 "),a("code",[t._v("VNC")]),t._v(" 和 "),a("code",[t._v("Workbench")]),t._v(" 2种方式均可正常登陆。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600694600-1550x634.jpg",alt:"yun04"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600694600-1190x1018.jpg",alt:"yun05"}})]),t._v(" "),a("h3",{attrs:{id:"_1-3-vnc-远程连接修改登陆密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-vnc-远程连接修改登陆密码"}},[t._v("#")]),t._v(" 1.3 VNC 远程连接修改登陆密码")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600694600-1650x500.jpg",alt:"yun02"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600694600-1184x1146.jpg",alt:"yun03"}})]),t._v(" "),a("h3",{attrs:{id:"_1-4-workbench-远程连接实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-workbench-远程连接实例"}},[t._v("#")]),t._v(" 1.4 Workbench 远程连接实例")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600694956-1512x478.jpg",alt:"yun07"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600696362-1598x994.jpg",alt:"yun06"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600695097-3348x1876.jpg",alt:"yun08"}})]),t._v(" "),a("h3",{attrs:{id:"_1-5-ssh-命令行连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-ssh-命令行连接"}},[t._v("#")]),t._v(" 1.5 SSH 命令行连接")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" root@xxx.xxx.xxx.xxx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" newuser@xxx.xxx.xxx.xxx\n")])])]),a("h3",{attrs:{id:"_1-6-添加安全组-端口号配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-添加安全组-端口号配置"}},[t._v("#")]),t._v(" 1.6 添加安全组/端口号配置")]),t._v(" "),a("p",[t._v("打开云服务器管理控制台，进入实例详情，选择本实例安全组即可添加。\n如需在服务器上搭建 SQL、Redis、MongoDB 数据库等，需配置相应的端口号。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://help.aliyun.com/document_detail/25471.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云官方文档：云服务器 ECS > 安全 > 安全组 > 添加安全组规则"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601615610-3358x860.jpg",alt:"ip06"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601615610-3350x1860.jpg",alt:"ip07"}})]),t._v(" "),a("p",[t._v("已添加安全组示例：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602406339861-0-3358x1852.jpg",alt:"aliyun01"}})]),t._v(" "),a("h3",{attrs:{id:"_1-7-ssh-连接工具推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-ssh-连接工具推荐"}},[t._v("#")]),t._v(" 1.7 SSH 连接工具推荐")]),t._v(" "),a("h4",{attrs:{id:"termius"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#termius"}},[t._v("#")]),t._v(" Termius")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601629503-2754x1816.jpg",alt:"yun11"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600696948-2560x1600.jpg",alt:"yun09"}})]),t._v(" "),a("h4",{attrs:{id:"gopanel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gopanel"}},[t._v("#")]),t._v(" goPanel")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1600696948-3360x2026.jpg",alt:"yun10"}})]),t._v(" "),a("h2",{attrs:{id:"_2、域名购买和解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、域名购买和解析"}},[t._v("#")]),t._v(" 2、域名购买和解析")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/91731036",target:"_blank",rel:"noopener noreferrer"}},[t._v("详解什么是域名解析/如何解析域名"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://help.aliyun.com/document_detail/29716.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云官方文档：云解析 DNS > 快速入门 > 新手引导"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://help.aliyun.com/knowledge_detail/39834.html?spm=a2cle.14465449.0.0.4ccf1d68Cc6Cim#h2--dns-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云官方文档：云解析 DNS > 操作指南 > 解析生效测试方法"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zijian.aliyun.com/?spm=a2c1d.8251892.0.0.1a6b5b76WxQVh9#/domainDetect",target:"_blank",rel:"noopener noreferrer"}},[t._v("网站诊断分析"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_2-1-命令查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-命令查询"}},[t._v("#")]),t._v(" 2.1 命令查询")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dig")]),t._v(" www.xxx.com\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dig")]),t._v(" www.xxx.com @1.1.1.1\n")])])]),a("h3",{attrs:{id:"_2-2-注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-注意事项"}},[t._v("#")]),t._v(" 2.2 注意事项")]),t._v(" "),a("p",[t._v("TTL：为缓存时间，数值越小，修改记录各地生效时间越快，默认为10分钟。")]),t._v(" "),a("h3",{attrs:{id:"_2-3-图片示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-图片示例"}},[t._v("#")]),t._v(" 2.3 图片示例")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601612726-3344x882.jpg",alt:"ip01"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601613328-3346x1048.jpg",alt:"ip02"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601613328-3354x1248.jpg",alt:"ip03"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601613328-3348x1058.jpg",alt:"ip04"}})]),t._v(" "),a("h2",{attrs:{id:"_3、网站备案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、网站备案"}},[t._v("#")]),t._v(" 3、网站备案")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://beian.aliyun.com/pcContainer/formpage?page=selfBa&pageAction=init",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云备案网址"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"_4、搭建-vsftpd-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、搭建-vsftpd-服务"}},[t._v("#")]),t._v(" 4、搭建 vsftpd 服务")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://help.aliyun.com/knowledge_detail/182263.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云官方文档：云服务器 ECS > 建站教程 > 搭建应用 > 搭建FTP站点 > 手动搭建FTP站点（CentOS 8）"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844903940262199309#heading-7",target:"_blank",rel:"noopener noreferrer"}},[t._v("linux搭建ftp"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844903592273379335",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云的ecs服务器创建ftp站点"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_4-1-安装后-vsftpd-相关文件目录说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-安装后-vsftpd-相关文件目录说明"}},[t._v("#")]),t._v(" 4.1 安装后 vsftpd 相关文件目录说明")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("/usr/sbin/vsftpd "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vsftpd 的主程序")]),t._v("\n\n/etc/rc.d/init.d/vsftpd "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动脚本")]),t._v("\n/etc/pam.d/vsftpd "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pam 认证文件")]),t._v("\n/etc/vsftpd/vsftpd.conf "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主配置文件")]),t._v("\n/etc/vsftpd.ftpusers "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁止使用 vsftpd 的用户列表文件")]),t._v("\n/etc/vsftpd.user_list "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁止或允许使用 vsftpd 的用户列表文件（黑名单 or 白名单）")]),t._v("\n\n/var/ftp "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 匿名用户主目录")]),t._v("\n/var/ftp/pub "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 匿名用户的下载目录")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-2-vsftpd-相关命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-vsftpd-相关命令"}},[t._v("#")]),t._v(" 4.2 vsftpd 相关命令")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 vsftpd")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y vsftpd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入 vsftpd 目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/vsftpd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看文件命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 防火墙开启21端口（可跳过）")]),t._v("\nfirewall-cmd --add-service"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ftp --permanent\nfirewall-cmd --reload\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 云服务器设置开机自启动")]),t._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" vsftpd.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 vsftpd 服务")]),t._v("\nsystemctl start vsftpd.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭 vsftpd 服务")]),t._v("\nsystemctl stop vsftpd.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 vsftpd 服务")]),t._v("\nsystemctl restart vsftpd.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查 vsftpd 状态")]),t._v("\nsystemctl status vsftpd.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 ftp 端口号")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -antup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ftp")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" vsftp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -e vsftpd-xxxxxxxxx\n")])])]),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601635288-2560x1600.jpg",alt:"ftp01"}})]),t._v(" "),a("h3",{attrs:{id:"_4-3-配置本地用户访问ftp服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-配置本地用户访问ftp服务器"}},[t._v("#")]),t._v(" 4.3 配置本地用户访问FTP服务器")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建一个账号用于 ftp 登陆和上传")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" iamftp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" iamftp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个供FTP服务使用的文件目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/iamftp/ftpdata\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更改 /home/iamftp/ftpdata 目录的拥有者为 iamftp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R iamftp:iamftp /home/iamftp/ftpdata\n")])])]),a("h3",{attrs:{id:"_4-4-修改相关配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-修改相关配置"}},[t._v("#")]),t._v(" 4.4 修改相关配置")]),t._v(" "),a("p",[t._v("1、修改 vsftpd.conf 配置")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/vsftpd/vsftpd.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 主要修改项")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁止匿名登录FTP服务器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("anonymous_enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NO\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 允许本地用户登录FTP服务器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("local_enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 监听IPv4 sockets")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭监听IPv6 sockets")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# listen_ipv6=YES")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新添加参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置本地用户登陆后所在目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("local_root")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/var/ftp/iamftp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全部用户被限制在主目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("chroot_local_user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启用例外用户名单")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("chroot_list_enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定例外用户列表文件，列表中用户不被锁定在主目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("chroot_list_file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/etc/vsftpd/chroot_list\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启被动模式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pasv_enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("allow_writeable_chroot")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("YES\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Linux实例公网IP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pasv_address")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xxx.xxx.xxx.xxx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置被动模式下，建立数据传输可使用的端口范围的最小值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pasv_min_port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置被动模式下，建立数据传输可使用的端口范围的最大值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pasv_max_port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50100")]),t._v("\n")])])]),a("p",[t._v("2、创建 chroot_list 文件")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此名单中的用户不会被锁定在主目录，可以访问其他目录，没有也要创建")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/vsftpd/chroot_list\n")])])]),a("p",[t._v("3、重启 vsftpd 服务")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("systemctl restart vsftpd.service\n")])])]),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601640626-2416x1462.jpg",alt:"ftp03"}})]),t._v(" "),a("h3",{attrs:{id:"_4-5-端口添加安全组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-端口添加安全组"}},[t._v("#")]),t._v(" 4.5 端口添加安全组")]),t._v(" "),a("p",[t._v("参照 "),a("code",[t._v("1.6")]),t._v(" 将端口 "),a("code",[t._v("21")]),t._v(" 和 "),a("code",[t._v("vsftpd.conf")]),t._v(" 文件中的端口最大最小值加入安全组规则；")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601633400-3332x1130.jpg",alt:"ftp04"}})]),t._v(" "),a("h3",{attrs:{id:"_4-6-termius-连接配置示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-termius-连接配置示例"}},[t._v("#")]),t._v(" 4.6 Termius 连接配置示例")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601639184-2662x1804.jpg",alt:"ftp06"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601800814017-1-2416x1462.jpg",alt:"ftp07"}})]),t._v(" "),a("h3",{attrs:{id:"_4-7-本地-ftp-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-本地-ftp-测试"}},[t._v("#")]),t._v(" 4.7 本地 ftp 测试")]),t._v(" "),a("p",[t._v("Google Chrome 地址栏输入 "),a("code",[t._v("ftp://xxx.xxx.xxx.xxx:21")]),t._v(" 回车，输入用户名 "),a("code",[t._v("iamftp")]),t._v(" 和密码后可正常显示 "),a("code",[t._v("/home/iamftp/ftpdata")]),t._v(" 里的文件，则表示配置正确。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601801933664-0-3358x1376.jpg",alt:"ftp08"}})]),t._v(" "),a("h2",{attrs:{id:"_5、nginx-部署-http-静态服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、nginx-部署-http-静态服务"}},[t._v("#")]),t._v(" 5、Nginx 部署 HTTP 静态服务")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6877049080334417934",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx 部署线上服务器（Liunx）"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844904134345228301",target:"_blank",rel:"noopener noreferrer"}},[t._v("CentOS 7 安装 Nginx"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("本模块命令多来自以上2篇文章，感谢🙏作者大大。")]),t._v(" "),a("h3",{attrs:{id:"_5-1-安装前置软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-安装前置软件"}},[t._v("#")]),t._v(" 5.1 安装前置软件")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查 gcc、openssl、pcre、zlib 等是否安装")]),t._v("\nyum list installed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" gcc\nyum list installed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" openssl\nyum list installed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" pcre\nyum list installed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" zlib\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一次安装命令，本次购买服务器经检查已安装故跳过此步骤")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc openssl openssl-devel pcre pcre-devdl zlib zlib-devel -y\n")])])]),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601716288-2220x1404.jpg",alt:"nginx01"}})]),t._v(" "),a("h3",{attrs:{id:"_5-2-安装启动-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-安装启动-nginx"}},[t._v("#")]),t._v(" 5.2 安装启动 nginx")]),t._v(" "),a("p",[t._v("安装前请先按照 "),a("code",[t._v("1.6")]),t._v(" 步骤在服务端将 "),a("code",[t._v("80")]),t._v(" 端口加入安全组规则。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载")]),t._v("\nyum remove nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置开机启动")]),t._v("\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 nginx 服务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止 nginx 服务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx stop\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 nginx 服务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx restart\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 nginx 状态")]),t._v("\nsystemctl status nginx.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新加载配置，在修改过 nginx 配置文件后执行")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx reload\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 附：另一种启动方式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" sbin/\n./nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看启动进程")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n")])])]),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601800814037-0-2220x1404.jpg",alt:"nginx02"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601716302-2220x1404.jpg",alt:"nginx03"}})]),t._v(" "),a("h3",{attrs:{id:"_5-3-测试是否安装成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-测试是否安装成功"}},[t._v("#")]),t._v(" 5.3 测试是否安装成功")]),t._v(" "),a("p",[t._v("浏览器输入网址 "),a("code",[t._v("http://xxx.xxx.xxx.xxx")]),t._v(" 或者 "),a("code",[t._v("http://www.xxx.com")]),t._v(" 后回车，出现如下画面则表示ngnix安装成功。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601715455-3322x1512.jpg",alt:"nginx04"}})]),t._v(" "),a("h3",{attrs:{id:"_5-4-修改-nginx-conf-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-修改-nginx-conf-配置"}},[t._v("#")]),t._v(" 5.4 修改 nginx.conf 配置")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.nginx.cn/doc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx 中文文档"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编辑文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/nginx/nginx.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# :wq 保存修改后，重新加载配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nginx reload\n")])])]),a("p",[a("strong",[t._v("个人配置示例（请关注带😊的几个位置）")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more information on configuration, see:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   * Official English Documentation: http://nginx.org/en/docs/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   * Official Russian Documentation: http://nginx.org/ru/docs/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 所属用户，一般为 nginx | nobody")]),t._v("\nuser iamftp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker_processes auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nerror_log /var/log/nginx/error.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npid /run/nginx.pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.")]),t._v("\ninclude /usr/share/nginx/modules/*.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nevents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  worker_connections "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhttp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  log_format  main  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  access_log  /var/log/nginx/access.log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  sendfile            on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  tcp_nopush          on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  tcp_nodelay         on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  keepalive_timeout   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  types_hash_max_size "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启文件压缩")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gzip                on;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gzip_types    ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\ttext/plain ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#\t\t\ttext/css")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\ttext/xml")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\ttext/javascript")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#\t\t\tapplication/javascript")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/x-javascript")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/json")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/xml")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/xml+rss")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/xhtml+xml")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/x-font-ttf")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\tapplication/x-font-opentype")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\timage/svg+xml")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t\timage/x-icon;")]),t._v("\n\n\n  include             /etc/nginx/mime.types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  default_type        application/octet-stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 解决中文乱码")]),t._v("\n  charset utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Load modular configuration files from the /etc/nginx/conf.d directory.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# See http://nginx.org/en/docs/ngx_core_module.html#include")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for more information.")]),t._v("\n  include /etc/nginx/conf.d/*.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" default_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":80 default_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Load configuration files for the default server block.")]),t._v("\n    include /etc/nginx/default.d/*.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 有域名则配置，没有则配置服务器公网IP")]),t._v("\n    server_name  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("111")]),t._v(".xxx.xxx.111"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 解决中文乱码")]),t._v("\n    charset utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 存放静态页面的目录")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# root /usr/share/nginx/html;")]),t._v("\n    root /home/iamftp/ftpdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 首页设置")]),t._v("\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      root /home/iamftp/ftpdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      index index.html index.htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 404、40x错误页设置")]),t._v("\n    error_page "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" /404.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /40x.html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      root /home/iamftp/ftpdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 😊 50x错误页设置")]),t._v("\n    error_page "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v(" /50x.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /50x.html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      root /home/iamftp/ftpdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁止访问根目录下以 ht 结尾的文件")]),t._v("\n    location ~ /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".ht "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      deny all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Settings for a TLS enabled server.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   listen       443 ssl http2 default_server;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   listen       [::]:443 ssl http2 default_server;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   server_name  _;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   root         /usr/share/nginx/html;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   ssl_certificate "/etc/pki/nginx/server.crt";')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#   ssl_certificate_key "/etc/pki/nginx/private/server.key";')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   ssl_session_cache shared:SSL:1m;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   ssl_session_timeout  10m;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   ssl_ciphers PROFILE=SYSTEM;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   ssl_prefer_server_ciphers on;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   # Load configuration files for the default server block.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   include /etc/nginx/default.d/*.conf;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   location / {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   }")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   error_page 404 /404.html;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     location = /40x.html {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   }")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   error_page 500 502 503 504 /50x.html;")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     location = /50x.html {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   }")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5-5-测试-html-静态网页部署成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-测试-html-静态网页部署成功"}},[t._v("#")]),t._v(" 5.5 测试 html 静态网页部署成功")]),t._v(" "),a("blockquote",[a("p",[t._v("第一步：通过 "),a("code",[t._v("ftp")]),t._v(" 方式添加文件到上面 "),a("code",[t._v("4.3")]),t._v(" 中创建的 "),a("code",[t._v("ftp")]),t._v(" 数据存储目录 "),a("code",[t._v("/home/iamftp/ftpdata")]),t._v("；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601715455-2548x1410.jpg",alt:"nginx05"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第二步：浏览器测试首页是否可正常访问")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601715455-3356x1938.jpg",alt:"nginx07"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第三步：浏览器测试404错误页是否可正常访问")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601715455-3354x1944.jpg",alt:"nginx06"}})]),t._v(" "),a("h2",{attrs:{id:"_6、安装jenkins并部署项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、安装jenkins并部署项目"}},[t._v("#")]),t._v(" 6、安装Jenkins并部署项目")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jenkins.io/zh/doc/pipeline/tour/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins 中文文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844904176078553096",target:"_blank",rel:"noopener noreferrer"}},[t._v("好玩的Jenkins（讲解很详细的一篇文章👍）"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.pianshen.com/article/7551711544/",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Jenkins 构建 Coding 项目"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/6844904031161155598",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Jenkins 实现前端自动化发布和通知，让你的发布只需要 git push"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"jenkins-工作流程-摘自推荐阅读文章第三篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-工作流程-摘自推荐阅读文章第三篇"}},[t._v("#")]),t._v(" jenkins 工作流程（摘自推荐阅读文章第三篇）")]),t._v(" "),a("ol",[a("li",[t._v("本地：push 代码；")]),t._v(" "),a("li",[t._v("服务端：jenkins 拉取代码；")]),t._v(" "),a("li",[t._v("服务端：复制代码到 web 访问目录；")]),t._v(" "),a("li",[t._v("发送通知：邮件、钉钉；")])]),t._v(" "),a("h3",{attrs:{id:"_6-1-安装命令汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-安装命令汇总"}},[t._v("#")]),t._v(" 6.1 安装命令汇总")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 先确认 jenkins 依赖的 java 是否安装")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" java\njava -version\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取 jenkins 依赖库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" --import https://pkg.jenkins.io/redhat/jenkins.io.key\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 jenkins")]),t._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 jenkins 安装目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -ql jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 jenkins")]),t._v("\nsystemctl start jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭 jenkins")]),t._v("\nsystemctl stop jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 jenkins")]),t._v("\nsystemctl restart jenkins\n")])])]),a("h3",{attrs:{id:"_6-2-初始化-jenkins-省略步骤图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-初始化-jenkins-省略步骤图"}},[t._v("#")]),t._v(" 6.2 初始化 jenkins（省略步骤图）")]),t._v(" "),a("blockquote",[a("p",[t._v("第一步：参照 "),a("code",[t._v("1.6")]),t._v(" 将 jenkins 使用的 "),a("code",[t._v("8080")]),t._v(" 端口加入到安全组规则中；\n第二步：在浏览器端输入 "),a("code",[t._v("http://xxx.xxx.xxx.xxx:8080")]),t._v(" 后打开页面；\n第三部：执行命令 "),a("code",[t._v("cat /var/lib/jenkins/secrets/initialAdminPassword")]),t._v(" 获取密码并输入至页面管理员密码处；\n第四步：选择并安装插件，等待约二十分钟后安装成功；\n第五步：创建第一个管理员账号，并记住账号和密码；\n恭喜你，Jenkins 安装成功了 🌹🎉。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601800814030-3-3352x1998.jpg",alt:"jenkins01"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601800814028-2-3356x2012.jpg",alt:"jenkins02"}})]),t._v(" "),a("h3",{attrs:{id:"_6-3-服务器安装-git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-服务器安装-git"}},[t._v("#")]),t._v(" 6.3 服务器安装 git")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装命令")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看版本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" --version\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 git 安装位置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("whereis")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n")])])]),a("h4",{attrs:{id:"jenkins-确认-git-可执行文件路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-确认-git-可执行文件路径"}},[t._v("#")]),t._v(" Jenkins 确认 Git 可执行文件路径")]),t._v(" "),a("p",[a("code",[t._v("Jenkins")]),t._v(" -> 系统管理 -> 全局工具配置  -> Git区域 -> 确认Git可执行文件的路径正确")]),t._v(" "),a("h3",{attrs:{id:"_6-4-新建项目并构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-新建项目并构建"}},[t._v("#")]),t._v(" 6.4 新建项目并构建")]),t._v(" "),a("h4",{attrs:{id:"_6-4-1-jenkins-安装插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-1-jenkins-安装插件"}},[t._v("#")]),t._v(" 6.4.1 Jenkins 安装插件")]),t._v(" "),a("p",[t._v("Github仓库："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 管理插件 -> 安装 "),a("code",[t._v("Generic Webhook Trigger")]),t._v(" 插件；\nCoding仓库："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 管理插件 -> 安装 "),a("code",[t._v("Coding Webhook")]),t._v(" 插件；\nnvm插件安装："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 管理插件 -> 安装 "),a("code",[t._v("nvm wrapper")]),t._v(" 插件；")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849645-2-3358x1596.jpg",alt:"jenkins05"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-2-新建自由风格项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-2-新建自由风格项目"}},[t._v("#")]),t._v(" 6.4.2 新建自由风格项目")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601820435999-0-3344x1628.jpg",alt:"jenkins14"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601820436005-1-3312x1870.jpg",alt:"jenkins15"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-3-配置-general"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-3-配置-general"}},[t._v("#")]),t._v(" 6.4.3 配置：General")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602406339852-4-1890x1636.jpg",alt:"jenkins00"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-4-配置-源码管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-4-配置-源码管理"}},[t._v("#")]),t._v(" 6.4.4 配置：源码管理")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849629-4-3288x1536.jpg",alt:"jenkins08"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849643-5-3312x1732.jpg",alt:"jenkins09"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849641-3-3360x1878.jpg",alt:"jenkins07"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-5-配置-构建触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-5-配置-构建触发器"}},[t._v("#")]),t._v(" 6.4.5 配置：构建触发器")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849638-6-3326x1720.jpg",alt:"jenkins10"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-6-配置-构建环境-nvm-setting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-6-配置-构建环境-nvm-setting"}},[t._v("#")]),t._v(" 6.4.6 配置：构建环境（NVM Setting）")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849635-7-3316x1640.jpg",alt:"jenkins11"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-7-配置-构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-7-配置-构建"}},[t._v("#")]),t._v(" 6.4.7 配置：构建")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849618-8-3318x922.jpg",alt:"jenkins12"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-8-配置-构建后操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-8-配置-构建后操作"}},[t._v("#")]),t._v(" 6.4.8 配置：构建后操作")]),t._v(" "),a("h4",{attrs:{id:"_6-4-9-coding-仓库配置-webhook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-9-coding-仓库配置-webhook"}},[t._v("#")]),t._v(" 6.4.9 Coding 仓库配置 WebHook")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849627-0-3356x1666.jpg",alt:"jenkins03"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849633-1-3328x1754.jpg",alt:"jenkins04"}})]),t._v(" "),a("h4",{attrs:{id:"_6-4-10-测试是否生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-10-测试是否生效"}},[t._v("#")]),t._v(" 6.4.10 测试是否生效")]),t._v(" "),a("p",[t._v("修改代码并上传至仓库，刷新 jenkins 主界面可看到左下方项目已经在构建。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601818849631-9-3350x1828.jpg",alt:"jenkins13"}})]),t._v(" "),a("p",[t._v("第一次构建 "),a("code",[t._v("test")]),t._v(" 项目失败，查看构建记录提示 "),a("code",[t._v("python2")]),t._v("、"),a("code",[t._v("g++")]),t._v(" 命令不存在，解决方案在服务器上执行相应的安装命令后，jenkins 重新点击立即构建即可。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 python2")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" python2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 g++")]),t._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc gcc-c++\n")])])]),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601822016362-0-3358x1814.jpg",alt:"jenkins16"}})]),t._v(" "),a("h3",{attrs:{id:"_6-5-jenkins-发布项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-jenkins-发布项目"}},[t._v("#")]),t._v(" 6.5 jenkins 发布项目")]),t._v(" "),a("p",[a("code",[t._v("jenkins")]),t._v(" 将打包后的 "),a("code",[t._v("dist")]),t._v(" 目录发布，只需要在项目配置构建区域的执行 "),a("code",[t._v("shell")]),t._v(" 里添加几行命令即可，注意 "),a("code",[t._v("/home/iamftp/ftpdata/")]),t._v(" 是前面配置 ftp 和 nginx 时可访问的目录，"),a("code",[t._v("tools")]),t._v(" 是放置打包后文件的目录，这里先判断 "),a("code",[t._v("tools")]),t._v(" 是否存在，不存在的情况下先创建目录，然后执行 "),a("code",[t._v("cp")]),t._v(" 命令，同时输出构建成功后的访问地址。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601884202804-0-3318x1258.jpg",alt:"jenkins17"}})]),t._v(" "),a("p",[t._v("添加命令并成功保存后点击立即构建，发现构建失败，查看构建记录发现，执行 "),a("code",[t._v("cp")]),t._v(" 命令时没有目标目录的访问权限，解决方案如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601884202817-1-3312x1838.jpg",alt:"jenkins18"}})]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改 jenkins 用户")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/sysconfig/jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 JENKINS_USER 改成 root")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JENKINS_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改 jenkins 所有者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /var/lib\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R root:root jenkins\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 jenkins 目录所有者是否修改为 root")]),t._v("\nll -a\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 jenkins")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" jenkins restart\n")])])]),a("p",[t._v("成功修改 jenkins 所有者后，再次点击立即构建，等待一分钟后构建成功，打开 "),a("code",[t._v("http://xxx.xxx.xxx.xxx/tools/index.html")]),t._v(" 就可以查看网页内容了🎉🎉。\n"),a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1601884202820-2-3318x1848.jpg",alt:"jenkins19"}})]),t._v(" "),a("h3",{attrs:{id:"_6-6-jenkins-邮件通知"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-jenkins-邮件通知"}},[t._v("#")]),t._v(" 6.6 jenkins 邮件通知")]),t._v(" "),a("h4",{attrs:{id:"邮件模版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#邮件模版"}},[t._v("#")]),t._v(" 邮件模版")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("Jenkins构建结束通知,请及时处理！(本邮件是程序自动下发,请勿回复！) "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("hr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n项目名称：$PROJECT_NAME "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n构建编号：$BUILD_NUMBER 次构建 "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n构建状态：$BUILD_STATUS "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n触发原因：${CAUSE} "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\nGit  分支：${GIT_BRANCH} "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\nGit  版本：${GIT_REVISION} "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\nGit  路径："),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${GIT_URL}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${GIT_URL}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n构建地址："),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$BUILD_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("$BUILD_URL"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n构建日志："),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("${BUILD URL}console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${BUILD_URL}console"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v('\n变更集：${JELLY_SCRIPT,template="html"} '),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),a("h4",{attrs:{id:"配置步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置步骤"}},[t._v("#")]),t._v(" 配置步骤")]),t._v(" "),a("blockquote",[a("p",[t._v("第一步："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 管理插件 -> 安装 "),a("code",[t._v("Email Extension Plugin")]),t._v(" 插件；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602409139214-0-2602x300.jpg",alt:"email01"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第二步："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 系统配置 -> "),a("code",[t._v("Jenkins Location")]),t._v("、"),a("code",[t._v("Extended E-mail Notification")]),t._v("、"),a("code",[t._v("邮件通知")]),t._v(" 三个配置项；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602406339858-2-1076x2211.jpg",alt:"email02"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第三步："),a("code",[t._v("jenkins")]),t._v(" -> 项目配置 -> "),a("code",[t._v("构建后操作")]),t._v(" 配置；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602406339856-3-952x2337.jpg",alt:"email03"}})]),t._v(" "),a("blockquote",[a("p",[t._v("图中标有数字的邮箱说明：\n"),a("code",[t._v("1、2、4")]),t._v("：邮件管理员和发送者，是开通了 "),a("code",[t._v("smtp")]),t._v(" 服务的邮箱，保持一致；\n"),a("code",[t._v("3")]),t._v("：这里是邮件接收者，可以配置一个或多个接收用户，多个邮箱地址以逗号空格隔开；\n"),a("code",[t._v("5")]),t._v("：这里是 "),a("code",[t._v("jenkins")]),t._v(" 自带邮箱通知的测试区域，可随意填写邮箱测试；\n"),a("code",[t._v("6")]),t._v("：这里可默认为空，如果构建时报“503”错误，在保证其他配置无误时可尝试配置为和 "),a("code",[t._v("1、2、4")]),t._v(" 相同的邮箱地址查看问题是否解决；")]),t._v(" "),a("p",[t._v("在保证邮箱相关配置正确情况下，其他配置可参考图片进行修改或使用默认字段即可；")])]),t._v(" "),a("h3",{attrs:{id:"_6-7-jenkins-钉钉通知"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-jenkins-钉钉通知"}},[t._v("#")]),t._v(" 6.7 jenkins 钉钉通知")]),t._v(" "),a("h4",{attrs:{id:"通知模版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通知模版"}},[t._v("#")]),t._v(" 通知模版")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Git分支：\n${GIT_BRANCH}\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Git路径：\n${GIT_URL}\n"),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" 测网地址：\nhttp://xxx.xxx.xxx.xxx/tools/index.html\n")])])]),a("h4",{attrs:{id:"配置步骤-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置步骤-2"}},[t._v("#")]),t._v(" 配置步骤")]),t._v(" "),a("blockquote",[a("p",[t._v("第一步：电脑端钉钉 -> 群设置 -> 智能群助手 -> 添加机器人 -> 自定义（通过webhook接入自定义服务） -> 添加；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672832-0-1348x1176.jpg",alt:"jenkins01"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672836-5-1360x1188.jpg",alt:"jenkins02"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672834-4-1352x1180.jpg",alt:"jenkins03"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第二步："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 管理插件 -> 安装 "),a("code",[t._v("DingTalk")]),t._v(" 插件；")])]),t._v(" "),a("blockquote",[a("p",[t._v("第三步："),a("code",[t._v("jenkins")]),t._v(" -> 系统管理 -> 系统配置 -> "),a("code",[t._v("钉钉")]),t._v(" 项配置项；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672840-2-2652x1510.jpg",alt:"Jenkins04"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第四步："),a("code",[t._v("jenkins")]),t._v(" -> 项目配置 -> "),a("code",[t._v("General")]),t._v(" 配置；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672837-3-2584x1386.jpg",alt:"jenkins05"}})]),t._v(" "),a("blockquote",[a("p",[t._v("第五步：项目 -> 立即构建 -> 钉钉收到构建通知；")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://fengling68.github.io/imgbed/images/1602507672823-1-1316x910.jpg",alt:"jenkins06"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);
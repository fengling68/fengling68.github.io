import{_ as p,r as t,o,c as e,a as s,b as n,d as c,f as r}from"./app.3f8066ad.js";const l={},k=r(`<h1 id="判断有无-emoji" tabindex="-1"><a class="header-anchor" href="#判断有无-emoji" aria-hidden="true">#</a> 判断有无 emoji</h1><p>项目中显示文案超长截取时，当字符中有emoji表情会截取异常，在网上看到一篇博文很好的解决了这个问题，这里简单贴下代码。</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">unicodeCut</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> isSplit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> rsAstralRange <span class="token operator">=</span> <span class="token string">&#39;\\\\ud800-\\\\udfff&#39;</span><span class="token punctuation">,</span>
      rsZWJ <span class="token operator">=</span> <span class="token string">&#39;\\\\u200d&#39;</span><span class="token punctuation">,</span>
      rsVarRange <span class="token operator">=</span> <span class="token string">&#39;\\\\ufe0e\\\\ufe0f&#39;</span><span class="token punctuation">,</span>
      rsComboMarksRange <span class="token operator">=</span> <span class="token string">&#39;\\\\u0300-\\\\u036f&#39;</span><span class="token punctuation">,</span>
      reComboHalfMarksRange <span class="token operator">=</span> <span class="token string">&#39;\\\\ufe20-\\\\ufe2f&#39;</span><span class="token punctuation">,</span>
      rsComboSymbolsRange <span class="token operator">=</span> <span class="token string">&#39;\\\\u20d0-\\\\u20ff&#39;</span><span class="token punctuation">,</span>
      rsComboRange <span class="token operator">=</span> rsComboMarksRange <span class="token operator">+</span> reComboHalfMarksRange <span class="token operator">+</span> rsComboSymbolsRange<span class="token punctuation">;</span>
  <span class="token keyword">let</span> reHasUnicode <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">&#39;[&#39;</span> <span class="token operator">+</span> rsZWJ <span class="token operator">+</span> rsAstralRange <span class="token operator">+</span> rsComboRange <span class="token operator">+</span> rsVarRange <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> rsFitz <span class="token operator">=</span> <span class="token string">&#39;\\\\ud83c[\\\\udffb-\\\\udfff]&#39;</span><span class="token punctuation">,</span>
      rsOptVar <span class="token operator">=</span> <span class="token string">&#39;[&#39;</span> <span class="token operator">+</span> rsVarRange <span class="token operator">+</span> <span class="token string">&#39;]?&#39;</span><span class="token punctuation">,</span>
      rsCombo <span class="token operator">=</span> <span class="token string">&#39;[&#39;</span> <span class="token operator">+</span> rsComboRange <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">,</span>
      rsModifier <span class="token operator">=</span> <span class="token string">&#39;(?:&#39;</span> <span class="token operator">+</span> rsCombo <span class="token operator">+</span> <span class="token string">&#39;|&#39;</span> <span class="token operator">+</span> rsFitz <span class="token operator">+</span> <span class="token string">&#39;)&#39;</span><span class="token punctuation">,</span>
      reOptMod <span class="token operator">=</span> rsModifier <span class="token operator">+</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">,</span>
      rsAstral <span class="token operator">=</span> <span class="token string">&#39;[&#39;</span> <span class="token operator">+</span> rsAstralRange <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">,</span>
      rsNonAstral <span class="token operator">=</span> <span class="token string">&#39;[^&#39;</span> <span class="token operator">+</span> rsAstralRange <span class="token operator">+</span> <span class="token string">&#39;]&#39;</span><span class="token punctuation">,</span>
      rsRegional <span class="token operator">=</span> <span class="token string">&#39;(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}&#39;</span><span class="token punctuation">,</span>
      rsSurrPair <span class="token operator">=</span> <span class="token string">&#39;[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]&#39;</span><span class="token punctuation">,</span>
      rsOptJoin <span class="token operator">=</span> <span class="token string">&#39;(?:&#39;</span> <span class="token operator">+</span> rsZWJ <span class="token operator">+</span> <span class="token string">&#39;(?:&#39;</span> <span class="token operator">+</span> <span class="token punctuation">[</span>rsNonAstral<span class="token punctuation">,</span> rsRegional<span class="token punctuation">,</span> rsSurrPair<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;)&#39;</span> <span class="token operator">+</span> rsOptVar <span class="token operator">+</span> reOptMod <span class="token operator">+</span> <span class="token string">&#39;)*&#39;</span><span class="token punctuation">,</span>
      rsSeq <span class="token operator">=</span> rsOptVar <span class="token operator">+</span> reOptMod <span class="token operator">+</span> rsOptJoin<span class="token punctuation">,</span>
      rsSymbol <span class="token operator">=</span> <span class="token string">&#39;(?:&#39;</span> <span class="token operator">+</span> <span class="token punctuation">[</span>rsNonAstral <span class="token operator">+</span> rsCombo <span class="token operator">+</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">,</span> rsCombo<span class="token punctuation">,</span> rsRegional<span class="token punctuation">,</span> rsSurrPair<span class="token punctuation">,</span> rsAstral<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;|&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;)&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> reUnicode <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>rsFitz <span class="token operator">+</span> <span class="token string">&#39;(?=&#39;</span> <span class="token operator">+</span> rsFitz <span class="token operator">+</span> <span class="token string">&#39;)|&#39;</span> <span class="token operator">+</span> rsSymbol <span class="token operator">+</span> rsSeq<span class="token punctuation">,</span> <span class="token string">&#39;g&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">hasUnicode</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> reHasUnicode<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">unicodeToArray</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reUnicode<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">asciiToArray</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> isSplit <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token function">hasUnicode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">unicodeToArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">asciiToArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">hasUnicode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>`,3),u={class:"custom-container tip"},i=s("p",{class:"custom-container-title"},"Tips",-1),d=s("br",null,null,-1),g={href:"https://www.cnblogs.com/wzybnzy/p/7569113.html",target:"_blank",rel:"noopener noreferrer"};function f(m,_){const a=t("ExternalLinkIcon");return o(),e("div",null,[k,s("div",u,[i,s("p",null,[n("原文作者：Wzybnzy "),d,n(" 原文链接："),s("a",g,[n("js emoji表情长度判断 https://www.cnblogs.com/wzybnzy/p/7569113.html"),c(a)])])])])}const y=p(l,[["render",f],["__file","判断有无 emoji.html.vue"]]);export{y as default};
